<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>server side events</title>
</head>

<body>
    <script>
            var source;
            if (!!window.EventSource) {
                source = new EventSource('http://localhost:9090//standardSubscription');
            } else {
                // Result to xhr polling :(
            }
            let i = 0;
            source.addEventListener('event', function (e) {
                console.log("Receiving event ......." + i++)
                console.log(e.data);
            }, false);

            source.addEventListener('open', function (e) {
                console.log("connection was opened");
            }, false);

            source.addEventListener('error', function (e) {
                if (e.readyState === EventSource.CLOSED) {
                    console.log("Received 'error even't: connection was closed");
                }
            }, false);
    </script>
</body>
</html>
